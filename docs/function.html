<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. 関数 &mdash; ジョブクラウン Python 研修・勉強会 学習用資料</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="_static/link_control.js"></script>
        <script src="_static/sidebar_util.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="4. ライブラリ・モジュール" href="library.html" />
    <link rel="prev" title="2. イテラブルオブジェクト" href="iterable.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Python 研修・勉強会 ドキュメント
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="hiyoko_index.html">ひよこコース</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="start_python.html">1. Python を始めよう</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterable.html">2. イテラブルオブジェクト</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. 関数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.1. 関数とは</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">3.2. 組込み関数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#print">3.2.1. print 関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#abs">3.2.2. abs 関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#len">3.2.3. len 関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zip">3.2.4. zip 関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map">3.2.5. map 関数</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">3.3. ユーザ定義関数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">3.3.1. 位置引数とキーワード引数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">3.3.2. 引数のデフォルト値</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">3.4. スコープ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">3.5. 再帰</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">3.6. ジェネレータ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">3.7. 高階関数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">3.8. ラムダ式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">3.9. デコレータ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">3.10. 演習問題</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">3.10.1. 演習1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">3.10.2. 演習2.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">3.10.3. 演習3.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id18">3.11. おまけ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library.html">4. ライブラリ・モジュール</a></li>
<li class="toctree-l2"><a class="reference internal" href="class.html">5. クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_exam.html">6. Python3 エンジニア認定基礎試験</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python 研修・勉強会 ドキュメント</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="hiyoko_index.html">ひよこコース</a> &raquo;</li>
      <li><span class="section-number">3. </span>関数</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">3. </span>関数<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク"></a></h1>
<section id="id2">
<h2><span class="section-number">3.1. </span>関数とは<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">プログラミング言語でいうところの関数とは「いくつかの処理をまとめて、ひとつの機能にしたもの」といえます。</div>
<div class="line"><br /></div>
<div class="line">関数といえば Excel にもありますよね。</div>
<div class="line">あれも仕組みとしてはプログラミング言語の関数と同等のものです。</div>
<div class="line"><br /></div>
<div class="line">例として Excel の SUM 関数を見てみましょう。</div>
<div class="line">これは渡したセルに含まれる数値の合計値を返すという関数です。</div>
</div>
<img alt="_images/image019.png" src="_images/image019.png" />
<div class="mb0 line-block">
<div class="line">この「渡す」とか「返す」といった概念が重要で関数に渡すデータのことを <strong>引数（ひきすう）</strong> 、関数が返すデータのことを <strong>戻り値</strong> または返り値といったりします。</div>
<div class="line"><br /></div>
<div class="line">関数は引数でデータを入力して、関数の内部で処理を行ったデータを戻り値として出力するというのが最も一般的な形です。（引数や戻り値のない関数もあります）</div>
</div>
<img alt="_images/image020.png" src="_images/image020.png" />
</section>
<section id="id3">
<h2><span class="section-number">3.2. </span>組込み関数<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="line-block">
<div class="line">組込み関数とは、あらかじめ用意されている関数のことです。</div>
<div class="line">Python の組込み関数は下記ページに記載されています。</div>
<div class="line"><a class="reference external" href="https://docs.python.org/ja/3/library/functions.html">https://docs.python.org/ja/3/library/functions.html</a></div>
<div class="line"><br /></div>
<div class="line">よく使う組込み関数についていくつか紹介していきます。</div>
</div>
<section id="print">
<h3><span class="section-number">3.2.1. </span>print 関数<a class="headerlink" href="#print" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">引数で渡したデータをコンソールに表示する関数。</div>
<div class="line">この関数は戻り値がありません。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;jobcrown&quot;</span><span class="p">)</span> <span class="c1"># 画面に文字を表示するだけで、戻り値は返さない。</span>
</pre></div>
</div>
</section>
<section id="abs">
<h3><span class="section-number">3.2.2. </span>abs 関数<a class="headerlink" href="#abs" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">引数で渡した数値の絶対値を返す。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>
<span class="n">value2</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value1</span><span class="p">)</span> <span class="c1"># abs 関数の戻り値を変数 value2 に代入</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">)</span> <span class="c1"># -10 10</span>
</pre></div>
</div>
</section>
<section id="len">
<h3><span class="section-number">3.2.3. </span>len 関数<a class="headerlink" href="#len" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">引数で渡したイテラブルオブジェクトの要素数を返す。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;jobcrown&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">))</span> <span class="c1"># 5</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">))</span> <span class="c1"># 8</span>
</pre></div>
</div>
</section>
<section id="zip">
<h3><span class="section-number">3.2.4. </span>zip 関数<a class="headerlink" href="#zip" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">二つのイテラブルオブジェクトの各項目を組み合わせたタプルを列挙したイテラブルオブジェクトを返す。</div>
<div class="line">(あまり使いませんが Python3 エンジニア認定基礎試験で出題されるので紹介します。)</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value_list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">value_list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;jobcrown&quot;</span>

<span class="n">zip_obj1</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">value_list1</span><span class="p">,</span> <span class="n">value_list2</span><span class="p">)</span>
<span class="n">zip_obj2</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">zip_obj1</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_obj1</span><span class="p">))</span> <span class="c1"># [(1, 6), (2, 7), (3, 8), (4, 9)]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_obj2</span><span class="p">))</span> <span class="c1"># [((1, 6), &#39;j&#39;), ((2, 7), &#39;o&#39;), ((3, 8), &#39;b&#39;), ((4, 9), &#39;c&#39;)]</span>
</pre></div>
</div>
</section>
<section id="map">
<h3><span class="section-number">3.2.5. </span>map 関数<a class="headerlink" href="#map" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">イテラブルオブジェクトの各要素に対して引数で指定した関数を実行したものを列挙したイテラブルオブジェクトを返す。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">1</span><span class="p">,</span>
    <span class="mf">2.3</span><span class="p">,</span>
    <span class="s2">&quot;4&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
    <span class="p">{</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">11</span><span class="p">:</span><span class="mi">12</span><span class="p">},</span>
    <span class="kc">True</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">map_obj</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">map_obj</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id4">
<h2><span class="section-number">3.3. </span>ユーザ定義関数<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">関数はユーザが自由に定義することもできます。</div>
<div class="line">関数の定義には <strong>def 構文</strong> を使用します。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">関数名</span><span class="p">(</span><span class="n">引数</span><span class="p">):</span>
    <span class="n">処理</span>
    <span class="k">return</span> <span class="n">戻り値</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">例として下記のような「あいさつ関数」を定義してみましょう。</div>
</div>
<img alt="_images/image021.png" src="_images/image021.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;こんにちは&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;さん&quot;</span>
    <span class="k">return</span> <span class="n">message</span>

<span class="nb">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">(</span><span class="s2">&quot;津山&quot;</span><span class="p">))</span> <span class="c1"># こんにちは津山さん</span>
</pre></div>
</div>
<section id="id5">
<h3><span class="section-number">3.3.1. </span>位置引数とキーワード引数<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">関数を呼び出すとき、引数を指定する方法として位置引数とキーワード引数というものがあります。</div>
<div class="line"><br /></div>
<div class="line">例えば、下記のような関数を考えます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_func1</span><span class="p">(</span><span class="n">item_name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;商品名 : </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">価格 : </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">説明 : </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">関数を呼び出すとき、関数定義で定義してある引数 ( <strong>仮引数</strong> といいます) と同じ位置で引数を指定する方式を <strong>位置引数</strong> といいます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">some_func1</span><span class="p">(</span><span class="s2">&quot;商品A&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;これは商品Aです&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">関数を呼び出すときに 仮引数 = 引数 の形式で指定する方式を <strong>キーワード引数</strong> といいます。</div>
<div class="line">引数の位置は関数定義で定義してある仮引数の位置と違っていても問題ありません。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">some_func1</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;200&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;これは商品Bです&quot;</span><span class="p">,</span> <span class="n">item_name</span><span class="o">=</span><span class="s2">&quot;商品B&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">また、位置引数とキーワード引数は併用することができます。</div>
<div class="line">ただし、その場合は必ず位置引数を先に指定しなければいけません。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">some_func1</span><span class="p">(</span><span class="s2">&quot;商品C&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;これは商品Cです&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;300&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3><span class="section-number">3.3.2. </span>引数のデフォルト値<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">関数の引数にはデフォルト値を設定することができます。</div>
<div class="line">方法は関数定義時に以下のように指定します。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">関数名</span><span class="p">(</span><span class="n">引数</span><span class="o">=</span><span class="n">デフォルト値</span><span class="p">):</span>
    <span class="n">処理</span>
    <span class="k">return</span> <span class="n">戻り値</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">引数のデフォルト値を設定してある関数は、呼び出し時に引数を渡さなければデフォルト値を使用し、引数を渡せばその値を使用します。</div>
<div class="line"><br /></div>
<div class="line">また、デフォルト値なしの引数と併用できますが、その場合は必ずデフォルト値なしの引数を先に定義する必要があります。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_func2</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;私の名前は </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> です。</span><span class="se">\n</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2"> 才です。</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">some_func2</span><span class="p">(</span><span class="s2">&quot;ひよこ&quot;</span><span class="p">)</span>
<span class="n">some_func2</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">some_func2</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Jobcrown&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id7">
<h2><span class="section-number">3.4. </span>スコープ<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">関数の外からは関数の中の変数を参照することはできません。</div>
<div class="line">反対に、関数の中からは関数の外にある変数を参照できます。</div>
<div class="line">この仕組みを <strong>スコープ</strong> といいます。</div>
<div class="line"><br /></div>
<div class="line">分かりやすく説明すると、下図のような感じで関数の外からは関数の中は見えませんが関数の中からは関数の外が見えます。</div>
</div>
<img alt="_images/image022.png" src="_images/image022.png" />
<div class="mb0 line-block">
<div class="line">関数の外の変数をグローバル変数、関数の中の変数をローカル変数といいます。</div>
<div class="line"><br /></div>
<div class="line">上図の関数 F 内で変数 A を上書きしている部分は、上書きというよりも関数内で再定義しているという表現の方が近いかもしれません。</div>
<div class="line"><br /></div>
<div class="line">通常の変数の場合、関数内で上書きしても関数の外には影響ありませんが、</div>
<div class="line">リスト等の要素を変更した場合は関数の外でも反映されます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">func1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="c1"># [100, 2, 3]</span>
</pre></div>
</div>
</section>
<section id="id8">
<h2><span class="section-number">3.5. </span>再帰<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">関数の中で、その関数自身を呼び出して繰り返し処理を行う再帰という手法があります。</div>
<div class="line">再帰を使うことで、より短いコードで処理を実行することができます。</div>
<div class="line"><br /></div>
<div class="line">例えば、下記に階乗を計算する関数を示します。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fact</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="n">fact</span><span class="p">(</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 関数 fact を再帰呼び出し</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">fact</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c1"># 6</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fact</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="c1"># 120</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">再帰は直感的には分かりづらいですが、下図のような処理の流れになります。</div>
</div>
<img alt="_images/image023.png" src="_images/image023.png" />
<div class="mb0 line-block">
<div class="line">関数中に再帰呼び出しを行うとその関数での処理は一旦中断して呼び出された関数の処理に移ります。</div>
<div class="line">その関数の中でも再帰呼び出しが行われると、その処理も一旦中断して次の関数の処理...と進んでいきます。</div>
<div class="line">最終的に関数を終了する条件を満たすとひとつ前の関数に戻り値を返す処理を順次繰り返し、一番最初の関数まで戻っていき処理を終了します。</div>
<div class="line"><br /></div>
<div class="line">中断した関数の処理は <strong>スタック</strong> というメモリ領域に保存されていきますが、関数の終了条件を誤ると永遠に再帰呼び出しが行われ、</div>
<div class="line">スタックの容量がいっぱいになってしまうスタックオーバーフローという状態になり、エラーとして処理が途中で終了してしまいます。</div>
</div>
</section>
<section id="id9">
<h2><span class="section-number">3.6. </span>ジェネレータ<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">関数の戻り値に return ではなく <strong>yield</strong> を使用すると、 <strong>ジェネレータ</strong> という関数になります。</div>
<div class="line"><br /></div>
<div class="line">関数では return で戻り値を返した時点で関数の中の状態は全てクリアされますが、</div>
<div class="line">ジェネレータは yield で戻り値を返した時点でジェネレータ内の状態を保ったままになります。</div>
<div class="line">ジェネレータを再度呼び出すと、ジェネレータの処理は中断された場所から再開されます。</div>
<div class="line"><br /></div>
<div class="line">ジェネレータの戻り値はジェネレータを変数に代入した状態で <strong>next 関数</strong> で受け取る方法と、</div>
<div class="line">for 文でカウンタ変数として受け取る方法があります。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
    <span class="k">yield</span> <span class="s2">&quot;python&quot;</span>
    <span class="k">yield</span> <span class="s2">&quot;jobcrown&quot;</span>
    <span class="k">yield</span> <span class="s2">&quot;hiyoko&quot;</span>
    <span class="k">yield</span> <span class="s2">&quot;abc&quot;</span>

<span class="c1"># next 関数で受け取る例</span>
<span class="n">g1</span> <span class="o">=</span> <span class="n">gen</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>

<span class="c1"># カウンタ変数として受け取る例</span>
<span class="k">for</span> <span class="n">g2</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">g2</span><span class="p">)</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">ジェネレータの使いどころは、その名の通り何かを <strong>生成</strong> するような処理に向いています。</div>
<div class="line">下記の例ではジェネレータを呼び出すたびに連番の ID を生成します。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">id_gen</span><span class="p">():</span>
    <span class="n">id_num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">max_length</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;ID&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">id_num</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">max_length</span><span class="p">)</span>
        <span class="k">yield</span> <span class="nb">id</span>
        <span class="n">id_num</span><span class="o">+=</span><span class="mi">1</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">id_num</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">max_length</span><span class="p">:</span>
            <span class="k">break</span>

<span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">id_gen</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id10">
<h2><span class="section-number">3.7. </span>高階関数<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">引数として関数を受け取ったり、戻り値として関数を返したりする関数を <strong>高階関数</strong> といいます。</div>
<div class="line">例えば組込み関数の <strong>filter 関数</strong> は引数で関数を受け取る高階関数です。</div>
<div class="line">引数として高階関数に渡す関数を <strong>コールバック関数</strong> といったりもします。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span><span class="p">(</span><span class="n">関数</span><span class="p">,</span> <span class="n">イテラブルオブジェクト</span><span class="p">)</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">上記のように、第一引数に関数を、第二引数にイテラブルオブジェクトを指定します。</div>
<div class="line">この filter 関数はイテラブルオブジェクトの各要素から関数が True を返すものだけからなる filter オブジェクトというイテラブルオブジェクトを返します。</div>
<div class="line"><br /></div>
<div class="line">以下に例を示します。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span> <span class="c1"># 引数が偶数の時 True を返す関数</span>
    <span class="k">return</span> <span class="n">arg</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">even_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span> <span class="n">arr</span><span class="p">))</span> <span class="c1"># filter 関数は filter オブジェクトを返すので、list 関数でリストに変換している</span>

<span class="nb">print</span><span class="p">(</span><span class="n">even_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">ユーザ定義関数でも高階関数は作れます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_filter</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span> <span class="c1"># 高階関数</span>
    <span class="n">ret_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">func</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
            <span class="n">ret_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret_list</span>

<span class="n">even_list</span> <span class="o">=</span> <span class="n">my_filter</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">even_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">関数内で定義した関数を返すような形にすることで、次のように記述することもできます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_filter2</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> <span class="c1"># 高階関数</span>
    <span class="n">ret_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">func</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                <span class="n">ret_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret_list</span>
    <span class="k">return</span> <span class="n">inner</span> <span class="c1"># 関数内で定義した関数を返す</span>

<span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">even_filter</span> <span class="o">=</span> <span class="n">my_filter2</span><span class="p">(</span><span class="n">is_even</span><span class="p">)</span> <span class="c1"># is_even 関数に my_filter2 関数を適用した even_filter 関数を定義</span>

<span class="n">even_list</span> <span class="o">=</span> <span class="n">even_filter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">even_list</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id11">
<h2><span class="section-number">3.8. </span>ラムダ式<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">ラムダ式 (lambda 式) とは無名関数とも呼ばれる関数で、一行で記述ができます。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">引数</span><span class="p">:</span> <span class="n">戻り値</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">例えば、前節で例として示した関数 is_even をラムダ式で記述すると以下のようになります。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">単純な処理の関数ならばラムダ式を使用することでコードをよりシンプルにすることができるのです。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>

<span class="n">even_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">arr</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">even_list</span><span class="p">)</span> <span class="c1"># [2, 4, 6]</span>
</pre></div>
</div>
</section>
<section id="id12">
<h2><span class="section-number">3.9. </span>デコレータ<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">関数を受け取って関数を返す高階関数をより簡潔に記述する方法として <strong>デコレータ</strong> というものがあります。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_filter2</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> <span class="c1"># 高階関数</span>
    <span class="n">ret_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">func</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                <span class="n">ret_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret_list</span>
    <span class="k">return</span> <span class="n">inner</span> <span class="c1"># 関数内で定義した関数を返す</span>

<span class="nd">@my_filter2</span> <span class="c1"># デコレータ</span>
<span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">even_list</span> <span class="o">=</span> <span class="n">is_even</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">even_list</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id13">
<h2><span class="section-number">3.10. </span>演習問題<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="line-block">
<div class="line">演習用ディレクトリに lesson3 というディレクトリを作成し、</div>
<div class="line">各問題ごとに演習用のファイルを作成して、プログラムを作成しましょう。</div>
</div>
<section id="id14">
<h3><span class="section-number">3.10.1. </span>演習1.<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="mb0 line-block">
<div class="line">ファイル名: practice1.py</div>
<div class="line">次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">cut_off_text</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">text: int</div>
<div class="line">max_length: int (デフォルト値 20)</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">text の文字数が max_length を超える場合、それ以降を省略し末尾に「…」を追加した文字列を返し</div>
<div class="line">text の文字数が max_length 以下なら、そのままの文字列を返す</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;寿限無 寿限無 五劫のすりきれ</span>
<span class="s2">海砂利水魚の水行末 雲来末 風来末</span>
<span class="s2">食う寝るところに住むところ</span>
<span class="s2">やぶら小路のぶら小路</span>
<span class="s2">パイポパイポ パイポのシューリンガン</span>
<span class="s2">シューリンガンのクーリンダイ</span>
<span class="s2">クーリンダイのポンポコナーのポンポコピーの</span>
<span class="s2">長久命の長助&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cut_off_text</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">寿限無 寿限無 五劫のすりきれ</span>
<span class="sd">海砂利水…</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="id15">
<h3><span class="section-number">3.10.2. </span>演習2.<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="line-block">
<div class="line">ファイル名: practice2.py</div>
</div>
<div class="mb0 line-block">
<div class="line">(1) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">clamp</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">num: int</div>
<div class="line">max_num: int (デフォルト値 255)</div>
<div class="line">min_num: int (デフォルト値 0)</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">num が max_num を超える場合は max_num を返し、</div>
<div class="line">min_num を未満の場合は min_num を返し、</div>
<div class="line">min_num と max_num の間の数値の場合は num を返す。</div>
<div class="line">ただし、num が数値型でない場合は 0 を返す。</div>
</div>
</div>
<div class="line-block">
<div class="line">(ヒント)</div>
<div class="line-block">
<div class="line">組み込み関数の <a class="reference external" href="https://docs.python.org/ja/3/library/functions.html#max">max 関数</a> と <a class="reference external" href="https://docs.python.org/ja/3/library/functions.html#min">min 関数</a> を使用するとより簡潔に記述できます。</div>
</div>
</div>
<hr class="docutils" />
<div class="mb0 line-block">
<div class="line">(2) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">dec_to_hex</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">dec: int</div>
<div class="line">digits: int (デフォルト値 2)</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">10 進数の数値 dec を digits の文字数分ゼロ埋めした 16 進数の文字列 (大文字) を返す。</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">(ヒント)</div>
<div class="line-block">
<div class="line">int 型のデータを 16 進数の文字列に変換するには <strong>hex 関数</strong> を使用します。</div>
<div class="line">hex 関数 の戻り値は先頭に「0x」が付きます。</div>
<div class="line">(例) hex(123) → '0x7b'</div>
<div class="line"><br /></div>
</div>
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dec_to_hex</span><span class="p">(</span><span class="mi">123</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dec_to_hex</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dec_to_hex</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">7B</span>
<span class="sd">0F</span>
<span class="sd">1F4</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="mb0 line-block">
<div class="line">(3) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">get_hex_code</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">r: int</div>
<div class="line">g: int</div>
<div class="line">b: int</div>
<div class="line">prefix: str (デフォルト値 &quot;#&quot;)</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">10 進数のカラーコードを 16 進数のカラーコードに変換して返す。</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">(ヒント)</div>
<div class="line-block">
<div class="line">clamp 関数および dec_to_hex 関数を使用する。</div>
<div class="line">組み込み関数の <a class="reference external" href="https://docs.python.org/ja/3/library/functions.html#map">map 関数</a> を使用すると簡潔に記述できます。</div>
<div class="line"><br /></div>
</div>
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">get_hex_code</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">250</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">#0064FA</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3><span class="section-number">3.10.3. </span>演習3.<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク"></a></h3>
<div class="line-block">
<div class="line">ファイル名: practice3.py</div>
</div>
<div class="mb0 line-block">
<div class="line">(1) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">split_string</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">text: str</div>
<div class="line">length: int (デフォルト値 1)</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">text を length の文字数ごとに分割したリストを返す。</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">split_string</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">split_string</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">split_string</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">split_string</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="sd">[&#39;Py&#39;, &#39;th&#39;, &#39;on&#39;]</span>
<span class="sd">[&#39;Pyt&#39;, &#39;hon&#39;]</span>
<span class="sd">[&#39;Pyth&#39;, &#39;on&#39;]</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="mb0 line-block">
<div class="line">(2) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">hex_to_dec</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">hex_str: str</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">16 進数の文字列 hex_str を 10 進数の数値に変換して返す。</div>
<div class="line">ただし、hex_str が 10 進数に変換できない場合は 0 を返す。</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">(ヒント)</div>
<div class="line-block">
<div class="line">int 関数の第二引数に基数を指定すると、それに応じた文字列を数値に変換できます。</div>
<div class="line">(例) int(&quot;FF&quot;, 16) → 255</div>
<div class="line"><br /></div>
</div>
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">hex_to_dec</span><span class="p">(</span><span class="s2">&quot;0xab&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">hex_to_dec</span><span class="p">(</span><span class="s2">&quot;12D&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">hex_to_dec</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">171</span>
<span class="sd">301</span>
<span class="sd">0</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="mb0 line-block">
<div class="line">(3) 次のような関数を作ってみよう。</div>
</div>
<div class="quotation line-block">
<div class="line">関数名:</div>
<div class="line-block">
<div class="line">get_rgb_code</div>
</div>
<div class="line">引数:</div>
<div class="line-block">
<div class="line">hex_code: str</div>
</div>
<div class="line">戻り値:</div>
<div class="line-block">
<div class="line">16 進数のカラーコードを 10 進数のカラーコードのタプルに変換して返す。</div>
<div class="line">hex_code は先頭に「#」が付いている場合も付いていない場合も同様に変換が可能にする。</div>
<div class="line">hex_code から「#」をのぞいた文字列の文字数は 3 文字または 6 文字の場合のみ変換を行い、それ以外の文字数の場合は (0,0,0) を返す。</div>
</div>
</div>
<div class="mb0 line-block">
<div class="line">(ヒント)</div>
<div class="line-block">
<div class="line">split_string 関数および hex_to_dec 関数を使用する。</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="line">実行例</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="s2">&quot;#fff&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="s2">&quot;#fffaaa&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="s2">&quot;12abcd&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="s2">&quot;#fffaaab&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="mi">123</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="mi">112233</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_rgb_code</span><span class="p">(</span><span class="s2">&quot;#112233&quot;</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">↓ 実行結果</span>

<span class="sd">(255, 255, 255)</span>
<span class="sd">(255, 250, 170)</span>
<span class="sd">(18, 171, 205)</span>
<span class="sd">(0, 0, 0)</span>
<span class="sd">(17, 34, 51)</span>
<span class="sd">(17, 34, 51)</span>
<span class="sd">(17, 34, 51)</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="id18">
<h2><span class="section-number">3.11. </span>おまけ<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク"></a></h2>
<div class="mb0 line-block">
<div class="line">再帰を使い数独を解くサンプルプログラムを作ってみましたので遊んでみてください。</div>
<div class="line"><br /></div>
<div class="line">まずは下記リンクを右クリックで保存しましょう。</div>
<div class="line"><a class="reference external" href="https://github.com/TaroTsuyama/py_study/raw/master/sudoku/sudoku_solver.py">https://github.com/TaroTsuyama/py_study/raw/master/sudoku/sudoku_solver.py</a></div>
<div class="line"><br /></div>
<div class="line">サンプルプログラムでは世界一難しい数独といわれる下記の問題を使用しています。</div>
<div class="line"><a class="reference external" href="https://gigazine.net/news/20100822_hardest_sudoku/">https://gigazine.net/news/20100822_hardest_sudoku/</a></div>
<div class="line"><br /></div>
<div class="line">数独の問題は下記のような2次元のリストで表現していて、空白マスは 0 としています。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sudoku</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="mb0 line-block">
<div class="line">この部分を書き換えればどんな数独の問題でも一瞬で解けてしまいますので色々触って試してみてください。</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="iterable.html" class="btn btn-neutral float-left" title="2. イテラブルオブジェクト" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="library.html" class="btn btn-neutral float-right" title="4. ライブラリ・モジュール" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Taro Tsuyama.
      <span class="lastupdated">最終更新: 6月 09, 2022
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>